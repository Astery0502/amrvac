<HTML>
<HEAD>
<TITLE> MANUAL FOR ANALYSYS </TITLE>
</HEAD>
<BODY>
<h1>ANALYSIS</h1>

This is a subroutine which can be scheduled freely to derive quantities of interest from the entire grid.  
<hr>
This page:
 [<A HREF="#setup">Setup in par file</A>] [<A HREF="#usage">write_analysis subroutine</A>]
<hr>

<H2><A NAME="setup">Setup</A> in par file</H2>

Similar to the other IO-mechanisms, analysis is scheduled within the savelist: 
<pre>
 &savelist
        itsave(1,5)      = 0
        ditsave(5)       = 1
/
</pre>
The above example makes sure write_analysis is called every iteration.  

<H2><A NAME="usage">write_analysis subroutine</a></H2>

The file <em>$AMRVAC_DIR/src/amrvacio/analysis.t</em> contains the subroutine <em>write_analysis</em>.  To use it, simply copy this file into the working directory and modify.  
This routine is on the lowest abstraction level of <em>MPI-AMRVAC</em> such that the user has the flexibility to loop over the the SFC and freely perform integrals over the grid-functions, similar to the <em>printlog_special</em>.  
A special file-unit is reserved for the IO: <em>unitanalysis</em>.  This should be used for any IO performed by this routine.  
<hr>
</BODY>
</HTML>

